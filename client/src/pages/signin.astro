<section class="bg-gradient-to-l from-[#040611] to-[#112] text-white h-screen">
  <div class="grid grid-cols-1 lg:grid-cols-2">
    <div class="flex items-center justify-center px-4 py-10 sm:px-6 sm:py-16 lg:px-8 lg:py-24 h-screen">
      <div class="xl:mx-auto xl:w-full xl:max-w-sm 2xl:max-w-md">
        <h2 class="text-3xl font-bold leading-tight sm:text-4xl">
          Welcome back, Astronaut &#128640;
        </h2>
        <p class="mt-2 text-sm">
          Don&#x27;t have an account?{" "}
          <a
            href="/signup"
            class="font-semibold text-gray-400 transition-all duration-200 hover:underline"
          >Create one here!</a>
        </p>
        <form class="mt-8">
          <div class="space-y-5">
            <div>
              <label for="" class="text-base font-medium text-gray-400">
                {" "}
                Username{" "}
              </label>
              <div class="mt-2">
                <input
                  class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
                  placeholder="Enter your username"
                  id="username"
                />
              </div>
            </div>
            <div>
              <div class="flex items-center justify-between">
                <label for="" class="text-base font-medium text-gray-400">
                  {" "}
                  Password{" "}
                </label>
              </div>
              <div class="mt-2">
                <input
                  class="flex h-10 w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50"
                  type="password"
                  placeholder="Password"
                  id="password"
                />
              </div>
            </div>
            <div>
              <button
                type="submit"
                class="bg-gray-600 hover:bg-gray-600/40 transition-all inline-flex w-full items-center justify-center rounded-md px-3.5 py-2.5 font-semibold leading-7 text-white"
              >
                Login
                </svg>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="h-screen relative hidden lg:block">
      <img
        class="mx-auto h-full w-full rounded-md object-cover absolute"
        src="/signin.jpg"
        alt="Signin"
      />
    </div>
  </div>
</section>


<script>
  document.addEventListener("DOMContentLoaded", function () {

    if (localStorage.getItem("username")){
      location.href="/"
    }

    const form = document.querySelector("form");
    form?.addEventListener("submit", async function (event) {
      event.preventDefault();
      const username = document.querySelector("#username")?.value;
      const password = document.querySelector("#password")?.value;

      const res = await fetch(`${import.meta.env.PUBLIC_API_URL}/signin`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          username,
          password,
        }),
      });
      if (res.status === 200) {
        localStorage.setItem("username", username);
      }
      form.reset();
      location.href = "/"
    });
  });
</script>
